<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>UrbanMood - Recuperar contrase침a</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { min-height:100vh;display:flex;align-items:center;justify-content:center;background:#0d0d0d;margin:0;padding:0; }
    .login-wrapper { width:100%;max-width:420px;padding:40px 44px;background:#111;border:1px solid #242424;border-radius:18px;box-shadow:0 6px 28px -6px rgba(0,0,0,.55),0 2px 6px -2px rgba(0,0,0,.35);font-family:'Poppins',sans-serif; }
    .login-wrapper h1 { font-size:1.6rem;margin:0 0 .8rem;color:#c2d03a;text-align:center;font-weight:700; }
    .login-wrapper p.subtitle { font-size:.8rem;color:#9aa0a5;text-align:center;margin:0 0 2rem;line-height:1.4; }
    .login-wrapper form { display:grid;gap:18px; }
    .login-wrapper label { font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:#d3d7db;font-weight:600;display:block;margin-bottom:6px; }
    .login-wrapper input { width:100%;padding:13px 15px;border:1px solid #303030;border-radius:10px;background:#181818;color:#f2f2f2;font-size:0.95rem;line-height:1.2;box-sizing:border-box; }
    .login-wrapper input:focus { outline:none;border-color:#b6c628;box-shadow:0 0 0 2px rgba(182,198,40,.25); }
    .login-wrapper button { width:100%;background:#b6c628;color:#101410;font-weight:600;border:none;padding:15px 18px;border-radius:12px;cursor:pointer;font-size:1.05rem;transition:.25s;letter-spacing:.5px; }
    .login-wrapper button:hover { background:#cadd32; }
    #form-msg { font-size:.78rem;margin:4px 0 0; }
    #form-msg.error { color:#ff6b6b; }
    #form-msg.success { color:#6fdc90; }
    .back-link { display:block;margin-top:26px;text-align:center;font-size:.8rem;color:#889197;text-decoration:none; }
    .back-link:hover { color:#c2d03a; }
    @media (max-width:520px){
      .login-wrapper { padding:34px 26px; }
    }
  </style>
</head>
<body>
  <div class="login-wrapper">
    <h1>Recuperar contrase침a</h1>
    <p class="subtitle">Ingres치 tu email y te enviaremos un enlace para restablecer tu contrase침a.</p>
    <form id="forgot-form" novalidate>
      <div>
        <label for="email">Email</label>
        <input id="email" name="email" type="email" autocomplete="email" required placeholder="tu@email.com">
      </div>
      <button type="submit">Enviar enlace</button>
      <p id="form-msg" style="display:none"></p>
    </form>
    <a class="back-link" href="/login">&larr; Volver al login</a>
  </div>
<script>
  const form = document.getElementById('forgot-form');
  const msg = document.getElementById('form-msg');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.style.display = 'none';
    const email = form.email.value.trim().toLowerCase();
    if(!email) return;
    try {
      const res = await fetch('/forgot-password', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({email})
      });
      const j = await res.json();
      msg.className = j.success ? 'success' : 'error';
      msg.textContent = j.message;
      msg.style.display = 'block';
      if(j.success) form.querySelector('button').disabled = true;
    } catch(err){
      msg.className = 'error';
      msg.textContent = 'Error de red';
      msg.style.display = 'block';
    }
  });
</script>
</body>
</html>
